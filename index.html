<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortnite-like Browser Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to bottom, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        #game-container {
            position: relative;
            width: 800px;
            height: 600px;
            border: 4px solid #333;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }
        
        #game-canvas {
            background: linear-gradient(to bottom, #87CEEB, #90EE90);
            display: block;
        }
        
        #ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .health-bar {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 200px;
            height: 30px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid white;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .health-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(to right, #ff0000, #ff4500);
            transition: width 0.3s;
        }
        
        .resources {
            position: absolute;
            top: 60px;
            left: 20px;
            display: flex;
            gap: 10px;
        }
        
        .resource {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid white;
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .weapon-selector {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 10px;
        }
        
        .weapon {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid transparent;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            pointer-events: auto;
            transition: all 0.2s;
        }
        
        .weapon.active {
            border-color: #ffcc00;
            background: rgba(255, 255, 255, 0.4);
        }
        
        .building-menu {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            gap: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 10px;
        }
        
        .building-option {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid transparent;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            pointer-events: auto;
        }
        
        .building-option.active {
            border-color: #ffcc00;
        }
        
        #start-screen, #game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        
        #game-over {
            display: none;
        }
        
        h1 {
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #ff4500;
        }
        
        button {
            background: linear-gradient(to bottom, #ff8c00, #ff4500);
            border: none;
            color: white;
            padding: 15px 40px;
            font-size: 20px;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .controls {
            margin-top: 30px;
            text-align: center;
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            max-width: 500px;
        }
        
        .controls h2 {
            margin-bottom: 10px;
            color: #ffcc00;
        }
        
        .controls p {
            margin: 5px 0;
            font-size: 16px;
        }
        
        #score {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 20px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <canvas id="game-canvas" width="800" height="600"></canvas>
        
        <div id="ui-overlay">
            <div class="health-bar">
                <div class="health-fill" id="health-fill"></div>
            </div>
            
            <div class="resources">
                <div class="resource">
                    <span>üî®</span> <span id="wood-count">100</span>
                </div>
                <div class="resource">
                    <span>üß±</span> <span id="stone-count">50</span>
                </div>
                <div class="resource">
                    <span>üî©</span> <span id="metal-count">25</span>
                </div>
            </div>
            
            <div class="weapon-selector">
                <div class="weapon active" data-weapon="rifle">üî´</div>
                <div class="weapon" data-weapon="shotgun">üí•</div>
                <div class="weapon" data-weapon="sniper">üéØ</div>
                <div class="weapon" id="build-mode">üèóÔ∏è</div>
            </div>
            
            <div class="building-menu" id="building-menu">
                <div class="building-option" data-building="wall">üß±</div>
                <div class="building-option" data-building="floor">‚¨ú</div>
                <div class="building-option" data-building="ramp">üî∫</div>
            </div>
            
            <div id="score">Enemies: 0</div>
        </div>
        
        <div id="start-screen">
            <h1>FORTNITE-LIKE GAME</h1>
            <p>Survive as long as you can against enemy players!</p>
            <button id="start-button">START GAME</button>
            
            <div class="controls">
                <h2>CONTROLS</h2>
                <p>WASD - Move | Mouse - Aim | Left Click - Shoot | B - Build Mode</p>
                <p>1-3 - Switch Weapons | R - Reload | Space - Jump</p>
                <p>Collect resources and build structures for defense!</p>
            </div>
        </div>
        
        <div id="game-over">
            <h1>GAME OVER</h1>
            <p id="final-score">You survived for 0 seconds</p>
            <button id="restart-button">PLAY AGAIN</button>
        </div>
    </div>

    <script>
        // Game variables
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const startScreen = document.getElementById('start-screen');
        const gameOverScreen = document.getElementById('game-over');
        const startButton = document.getElementById('start-button');
        const restartButton = document.getElementById('restart-button');
        const healthFill = document.getElementById('health-fill');
        const scoreElement = document.getElementById('score');
        const buildModeButton = document.getElementById('build-mode');
        const buildingMenu = document.getElementById('building-menu');
        
        // Game state
        let gameActive = false;
        let player = {
            x: 400,
            y: 300,
            width: 40,
            height: 60,
            speed: 5,
            health: 100,
            direction: 0, // angle in radians
            weapons: ['rifle', 'shotgun', 'sniper'],
            currentWeapon: 0,
            ammo: [30, 8, 5],
            reloading: false,
            reloadTime: 0,
            resources: {
                wood: 100,
                stone: 50,
                metal: 25
            },
            buildingMode: false,
            selectedBuilding: 'wall'
        };
        
        let enemies = [];
        let bullets = [];
        let buildings = [];
        let resources = [];
        let keys = {};
        let mouse = { x: 0, y: 0, down: false };
        let gameTime = 0;
        let enemySpawnTimer = 0;
        let resourceSpawnTimer = 0;
        
        // Initialize resources on the map
        function initResources() {
            resources = [];
            for (let i = 0; i < 15; i++) {
                resources.push({
                    x: Math.random() * (canvas.width - 30),
                    y: Math.random() * (canvas.height - 30),
                    type: Math.floor(Math.random() * 3), // 0=wood, 1=stone, 2=metal
                    amount: Math.floor(Math.random() * 20) + 10
                });
            }
        }
        
        // Draw functions
        function drawPlayer() {
            ctx.save();
            ctx.translate(player.x, player.y);
            ctx.rotate(player.direction);
            
            // Body
            ctx.fillStyle = '#3498db';
            ctx.fillRect(-player.width/2, -player.height/2, player.width, player.height);
            
            // Head
            ctx.fillStyle = '#ffdbac';
            ctx.beginPath();
            ctx.arc(0, -player.height/2 - 15, 15, 0, Math.PI * 2);
            ctx.fill();
            
            // Weapon
            ctx.fillStyle = '#7f8c8d';
            ctx.fillRect(player.width/2 - 5, -5, 30, 10);
            
            ctx.restore();
        }
        
        function drawEnemies() {
            enemies.forEach(enemy => {
                ctx.save();
                ctx.translate(enemy.x, enemy.y);
                
                // Body
                ctx.fillStyle = '#e74c3c';
                ctx.fillRect(-enemy.width/2, -enemy.height/2, enemy.width, enemy.height);
                
                // Head
                ctx.fillStyle = '#ffdbac';
                ctx.beginPath();
                ctx.arc(0, -enemy.height/2 - 15, 15, 0, Math.PI * 2);
                ctx.fill();
                
                // Health bar
                if (enemy.health < 100) {
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                    ctx.fillRect(-20, -enemy.height/2 - 25, 40, 5);
                    ctx.fillStyle = '#2ecc71';
                    ctx.fillRect(-20, -enemy.height/2 - 25, 40 * (enemy.health / 100), 5);
                }
                
                ctx.restore();
            });
        }
        
        function drawBullets() {
            bullets.forEach(bullet => {
                ctx.fillStyle = '#f1c40f';
                ctx.beginPath();
                ctx.arc(bullet.x, bullet.y, 3, 0, Math.PI * 2);
                ctx.fill();
            });
        }
        
        function drawBuildings() {
            buildings.forEach(building => {
                ctx.fillStyle = building.color;
                ctx.fillRect(building.x, building.y, building.width, building.height);
            });
        }
        
        function drawResources() {
            resources.forEach(resource => {
                const types = ['#8B4513', '#7f8c8d', '#bdc3c7']; // wood, stone, metal colors
                const symbols = ['üå≤', 'üóø', 'üî©'];
                
                ctx.fillStyle = types[resource.type];
                ctx.fillRect(resource.x, resource.y, 30, 30);
                
                ctx.font = '20px Arial';
                ctx.fillText(symbols[resource.type], resource.x + 5, resource.y + 22);
            });
        }
        
        function drawTerrain() {
            // Draw ground
            ctx.fillStyle = '#90EE90';
            ctx.fillRect(0, canvas.height - 100, canvas.width, 100);
            
            // Draw some hills
            ctx.fillStyle = '#7CFC00';
            ctx.beginPath();
            ctx.moveTo(0, canvas.height - 100);
            ctx.quadraticCurveTo(200, canvas.height - 150, 400, canvas.height - 100);
            ctx.quadraticCurveTo(600, canvas.height - 50, canvas.width, canvas.height - 100);
            ctx.lineTo(canvas.width, canvas.height);
            ctx.lineTo(0, canvas.height);
            ctx.closePath();
            ctx.fill();
            
            // Draw trees
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(100, canvas.height - 150, 20, 50);
            ctx.fillStyle = '#228B22';
            ctx.beginPath();
            ctx.arc(110, canvas.height - 170, 30, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(600, canvas.height - 140, 15, 40);
            ctx.fillStyle = '#228B22';
            ctx.beginPath();
            ctx.arc(607, canvas.height - 160, 25, 0, Math.PI * 2);
            ctx.fill();
        }
        
        function drawUI() {
            // Update health bar
            healthFill.style.width = `${player.health}%`;
            
            // Update resource counts
            document.getElementById('wood-count').textContent = player.resources.wood;
            document.getElementById('stone-count').textContent = player.resources.stone;
            document.getElementById('metal-count').textContent = player.resources.metal;
            
            // Update score
            scoreElement.textContent = `Enemies: ${enemies.length}`;
            
            // Update weapon selector
            document.querySelectorAll('.weapon').forEach((weapon, index) => {
                weapon.classList.toggle('active', index === player.currentWeapon);
            });
            
            // Update building menu
            buildingMenu.style.display = player.buildingMode ? 'flex' : 'none';
            document.querySelectorAll('.building-option').forEach(option => {
                option.classList.toggle('active', option.dataset.building === player.selectedBuilding);
            });
            
            // Show ammo count
            const weaponElements = document.querySelectorAll('.weapon');
            weaponElements[0].innerHTML = `üî´<br>${player.ammo[0]}`;
            weaponElements[1].innerHTML = `üí•<br>${player.ammo[1]}`;
            weaponElements[2].innerHTML = `üéØ<br>${player.ammo[2]}`;
            weaponElements[3].innerHTML = player.buildingMode ? 'üî®' : 'üèóÔ∏è';
        }
        
        // Game logic functions
        function updatePlayer() {
            // Movement
            let dx = 0, dy = 0;
            
            if (keys['w'] || keys['ArrowUp']) dy -= player.speed;
            if (keys['s'] || keys['ArrowDown']) dy += player.speed;
            if (keys['a'] || keys['ArrowLeft']) dx -= player.speed;
            if (keys['d'] || keys['ArrowRight']) dx += player.speed;
            
            // Normalize diagonal movement
            if (dx !== 0 && dy !== 0) {
                dx *= 0.707;
                dy *= 0.707;
            }
            
            // Update position with boundary checks
            player.x = Math.max(player.width/2, Math.min(canvas.width - player.width/2, player.x + dx));
            player.y = Math.max(player.height/2, Math.min(canvas.height - player.height/2, player.y + dy));
            
            // Update direction based on mouse position
            player.direction = Math.atan2(mouse.y - player.y, mouse.x - player.x);
            
            // Handle reloading
            if (player.reloading) {
                player.reloadTime--;
                if (player.reloadTime <= 0) {
                    player.reloading = false;
                    // Refill ammo based on weapon type
                    const maxAmmo = [30, 8, 5];
                    player.ammo[player.currentWeapon] = maxAmmo[player.currentWeapon];
                }
            }
            
            // Handle building mode
            if (keys['b'] && !player.buildingMode) {
                player.buildingMode = true;
                keys['b'] = false; // Prevent continuous triggering
            }
            
            if (player.buildingMode && keys['Escape']) {
                player.buildingMode = false;
                keys['Escape'] = false;
            }
            
            // Place building
            if (player.buildingMode && mouse.down) {
                placeBuilding();
                mouse.down = false; // Prevent continuous building
            }
        }
        
        function placeBuilding() {
            const cost = {
                'wall': { wood: 10, stone: 0, metal: 0 },
                'floor': { wood: 10, stone: 0, metal: 0 },
                'ramp': { wood: 10, stone: 0, metal: 0 }
            };
            
            const buildingCost = cost[player.selectedBuilding];
            
            // Check if player has enough resources
            if (player.resources.wood >= buildingCost.wood && 
                player.resources.stone >= buildingCost.stone && 
                player.resources.metal >= buildingCost.metal) {
                
                // Deduct resources
                player.resources.wood -= buildingCost.wood;
                player.resources.stone -= buildingCost.stone;
                player.resources.metal -= buildingCost.metal;
                
                // Create building
                const building = {
                    x: Math.floor(mouse.x / 40) * 40,
                    y: Math.floor(mouse.y / 40) * 40,
                    width: 40,
                    height: 40,
                    type: player.selectedBuilding,
                    color: player.selectedBuilding === 'wall' ? '#8B4513' : 
                           player.selectedBuilding === 'floor' ? '#A9A9A9' : '#D2691E',
                    health: 100
                };
                
                buildings.push(building);
            }
        }
        
        function updateEnemies() {
            // Spawn new enemies
            enemySpawnTimer++;
            if (enemySpawnTimer >= 180 && enemies.length < 10) { // Spawn every 3 seconds if less than 10 enemies
                spawnEnemy();
                enemySpawnTimer = 0;
            }
            
            // Update existing enemies
            enemies.forEach((enemy, index) => {
                // Move towards player
                const dx = player.x - enemy.x;
                const dy = player.y - enemy.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance > 0) {
                    enemy.x += (dx / distance) * enemy.speed;
                    enemy.y += (dy / distance) * enemy.speed;
                }
                
                // Attack player if close enough
                if (distance < 50) {
                    player.health -= 0.5;
                    if (player.health <= 0) {
                        gameOver();
                    }
                }
                
                // Remove dead enemies
                if (enemy.health <= 0) {
                    enemies.splice(index, 1);
                    // Drop resources
                    resources.push({
                        x: enemy.x,
                        y: enemy.y,
                        type: Math.floor(Math.random() * 3),
                        amount: Math.floor(Math.random() * 15) + 5
                    });
                }
            });
        }
        
        function spawnEnemy() {
            // Spawn enemy at random edge of the map
            const side = Math.floor(Math.random() * 4);
            let x, y;
            
            switch(side) {
                case 0: // top
                    x = Math.random() * canvas.width;
                    y = -50;
                    break;
                case 1: // right
                    x = canvas.width + 50;
                    y = Math.random() * canvas.height;
                    break;
                case 2: // bottom
                    x = Math.random() * canvas.width;
                    y = canvas.height + 50;
                    break;
                case 3: // left
                    x = -50;
                    y = Math.random() * canvas.height;
                    break;
            }
            
            enemies.push({
                x: x,
                y: y,
                width: 40,
                height: 60,
                speed: 2 + Math.random(),
                health: 100,
                attackCooldown: 0
            });
        }
        
        function updateBullets() {
            bullets.forEach((bullet, index) => {
                // Move bullet
                bullet.x += Math.cos(bullet.direction) * bullet.speed;
                bullet.y += Math.sin(bullet.direction) * bullet.speed;
                
                // Check for collision with enemies
                enemies.forEach((enemy, enemyIndex) => {
                    const dx = bullet.x - enemy.x;
                    const dy = bullet.y - enemy.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < 30) {
                        // Hit enemy
                        enemy.health -= bullet.damage;
                        bullets.splice(index, 1);
                    }
                });
                
                // Check for collision with buildings
                buildings.forEach(building => {
                    if (bullet.x > building.x && bullet.x < building.x + building.width &&
                        bullet.y > building.y && bullet.y < building.y + building.height) {
                        bullets.splice(index, 1);
                    }
                });
                
                // Remove bullets that go off screen
                if (bullet.x < 0 || bullet.x > canvas.width || bullet.y < 0 || bullet.y > canvas.height) {
                    bullets.splice(index, 1);
                }
            });
        }
        
        function updateResources() {
            // Spawn new resources occasionally
            resourceSpawnTimer++;
            if (resourceSpawnTimer >= 300 && resources.length < 20) { // Spawn every 5 seconds if less than 20 resources
                resources.push({
                    x: Math.random() * (canvas.width - 30),
                    y: Math.random() * (canvas.height - 30),
                    type: Math.floor(Math.random() * 3),
                    amount: Math.floor(Math.random() * 20) + 10
                });
                resourceSpawnTimer = 0;
            }
            
            // Check for player collecting resources
            resources.forEach((resource, index) => {
                const dx = player.x - resource.x;
                const dy = player.y - resource.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 50) {
                    // Collect resource
                    if (resource.type === 0) player.resources.wood += resource.amount;
                    if (resource.type === 1) player.resources.stone += resource.amount;
                    if (resource.type === 2) player.resources.metal += resource.amount;
                    
                    resources.splice(index, 1);
                }
            });
        }
        
        function shoot() {
            if (player.reloading) return;
            
            const weaponData = {
                'rifle': { damage: 25, speed: 10, cooldown: 10 },
                'shotgun': { damage: 10, speed: 8, cooldown: 30 },
                'sniper': { damage: 100, speed: 15, cooldown: 60 }
            };
            
            const currentWeapon = player.weapons[player.currentWeapon];
            const data = weaponData[currentWeapon];
            
            // Check if we have ammo
            if (player.ammo[player.currentWeapon] > 0) {
                player.ammo[player.currentWeapon]--;
                
                // Create bullet
                bullets.push({
                    x: player.x + Math.cos(player.direction) * 30,
                    y: player.y + Math.sin(player.direction) * 30,
                    direction: player.direction,
                    speed: data.speed,
                    damage: data.damage
                });
                
                // Start reload if out of ammo
                if (player.ammo[player.currentWeapon] === 0) {
                    player.reloading = true;
                    player.reloadTime = data.cooldown * 2; // Reload takes twice as long as cooldown
                }
            } else {
                // Auto-reload if out of ammo
                player.reloading = true;
                player.reloadTime = data.cooldown * 2;
            }
        }
        
        function gameOver() {
            gameActive = false;
            gameOverScreen.style.display = 'flex';
            document.getElementById('final-score').textContent = `You survived for ${Math.floor(gameTime / 60)} seconds and defeated ${enemies.length} enemies`;
        }
        
        function resetGame() {
            player = {
                x: 400,
                y: 300,
                width: 40,
                height: 60,
                speed: 5,
                health: 100,
                direction: 0,
                weapons: ['rifle', 'shotgun', 'sniper'],
                currentWeapon: 0,
                ammo: [30, 8, 5],
                reloading: false,
                reloadTime: 0,
                resources: {
                    wood: 100,
                    stone: 50,
                    metal: 25
                },
                buildingMode: false,
                selectedBuilding: 'wall'
            };
            
            enemies = [];
            bullets = [];
            buildings = [];
            resources = [];
            keys = {};
            gameTime = 0;
            enemySpawnTimer = 0;
            resourceSpawnTimer = 0;
            
            initResources();
            
            gameOverScreen.style.display = 'none';
            gameActive = true;
        }
        
        // Main game loop
        function gameLoop() {
            if (!gameActive) return;
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update game state
            updatePlayer();
            updateEnemies();
            updateBullets();
            updateResources();
            
            // Draw everything
            drawTerrain();
            drawBuildings();
            drawResources();
            drawPlayer();
            drawEnemies();
            drawBullets();
            drawUI();
            
            // Increment game time
            gameTime++;
            
            // Continue game loop
            requestAnimationFrame(gameLoop);
        }
        
        // Event listeners
        startButton.addEventListener('click', () => {
            startScreen.style.display = 'none';
            gameActive = true;
            initResources();
            gameLoop();
        });
        
        restartButton.addEventListener('click', resetGame);
        
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            
            // Switch weapons with number keys
            if (e.key >= '1' && e.key <= '3') {
                player.currentWeapon = parseInt(e.key) - 1;
            }
            
            // Reload with R key
            if (e.key === 'r' && !player.reloading) {
                player.reloading = true;
                const weaponData = {
                    'rifle': { cooldown: 10 },
                    'shotgun': { cooldown: 30 },
                    'sniper': { cooldown: 60 }
                };
                const currentWeapon = player.weapons[player.currentWeapon];
                player.reloadTime = weaponData[currentWeapon].cooldown * 2;
            }
            
            // Select building type with number keys in build mode
            if (player.buildingMode && e.key >= '1' && e.key <= '3') {
                const buildingTypes = ['wall', 'floor', 'ramp'];
                player.selectedBuilding = buildingTypes[parseInt(e.key) - 1];
            }
        });
        
        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });
        
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouse.x = e.clientX - rect.left;
            mouse.y = e.clientY - rect.top;
        });
        
        canvas.addEventListener('mousedown', () => {
            mouse.down = true;
            if (gameActive && !player.buildingMode) {
                shoot();
            }
        });
        
        canvas.addEventListener('mouseup', () => {
            mouse.down = false;
        });
        
        // Building mode toggle
        buildModeButton.addEventListener('click', () => {
            player.buildingMode = !player.buildingMode;
        });
        
        // Building selection
        document.querySelectorAll('.building-option').forEach(option => {
            option.addEventListener('click', () => {
                player.selectedBuilding = option.dataset.building;
            });
        });
        
        // Weapon selection
        document.querySelectorAll('.weapon').forEach((weapon, index) => {
            if (index < 3) { // Only the first three are weapons
                weapon.addEventListener('click', () => {
                    player.currentWeapon = index;
                });
            }
        });
    </script>
</body>
</html>
